{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Chamados TI - Souza Araujo</title>
    <style>
        :root {
            --azul-primario: #003366;
            --vermelho-logo: #cc0000;
            --cinza-fundo: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--cinza-fundo);
            margin: 0;
            padding: 0;
        }

        /* Header ajustado para Logos Grandes */
        header {
            background-color: white;
            color: var(--azul-primario);
            padding: 20px 40px; /* Mais espa√ßo interno */
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-bottom: 6px solid var(--azul-primario); /* Linha mais grossa para destaque */
            position: relative;
            min-height: 180px; /* Garante altura m√≠nima para a logo */
            display: flex;
            align-items: center;
        }

        /* Linha Vermelha (Metade Direita) */
        header::after {
            content: "";
            position: absolute;
            bottom: -6px;
            right: 0;
            width: 50%;
            border-bottom: 6px solid var(--vermelho-logo);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* LOGO MAXIMIZADA: Aumentada para 180px para ler o lema */
        .logo-img {
            height: 180px; 
            width: auto;
            display: block;
            transition: transform 0.3s;
        }

        /* Frase Centralizada */
        .frase-central {
            position: absolute;
            left: 55%; /* Leve ajuste para n√£o bater na logo gigante */
            transform: translateX(-50%);
            white-space: nowrap;
            text-align: center;
        }

        .frase-central h1 {
            margin: 0;
            font-size: 38px; /* Aumentei o texto para acompanhar a logo */
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 800;
        }

        .texto-azul { color: var(--azul-primario); }
        .texto-vermelho { color: var(--vermelho-logo); }

        .container {
            max-width: 1100px;
            margin: 40px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* Mantendo o restante do CSS padr√£o para funcionamento */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: #fdfdfd;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #eee;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .btn-enviar {
            background-color: var(--vermelho-logo);
            color: white;
            border: none;
            padding: 18px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
        }

        table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        th { background-color: var(--azul-primario); color: white; padding: 15px; text-align: left; }
        td { padding: 15px; border-bottom: 1px solid #ddd; }
    </style>
</head>
<body>

<header>
    <div class="header-content">
        <img src="{% static 'logo_souza_araujo.png' %}" alt="Logo Souza Araujo" class="logo-img">

        <div class="frase-central">
            <h1>
                <span class="texto-azul">LOG√çSTICA</span> 
                <span class="texto-azul">-</span> 
                <span class="texto-vermelho">SUPORTE TI</span>
            </h1>
        </div>

        <div style="width: 200px;"></div>
    </div>
</header>

<div class="container">
    <h3>üìù Abrir Novo Chamado</h3>
    
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-grid">
            <select name="titulo" required style="grid-column: span 2;">
                <option value="">Selecione o Tipo de Problema</option>
                <optgroup label="Rede e Internet">
                    <option value="Sem Internet">Sem Internet</option>
                    <option value="Lentid√£o no Sistema">Lentid√£o no Sistema</option>
                </optgroup>
                <optgroup label="Equipamentos">
                    <option value="Computador/Notebook">Computador/Notebook n√£o liga</option>
                    <option value="Impressora">Problema na Impressora</option>
                </optgroup>
                <option value="Outros">Outros</option>
            </select>
                         
            <select name="setor" required>
                <option value="">Selecione seu Setor</option>
                <option value="Operacional/Gate">Operacional/Gate</option>
                <option value="Manutencao/Almoxarifado">Manuten√ß√£o/Almoxarifado</option>
                <option value="Financeiro">Financeiro</option>
                <option value="RH">RH</option>
                <option value="Comercial">Comercial</option>
            </select>

            <input type="text" name="ramal" placeholder="Ramal/Telefone" required>
            <input type="text" name="solicitante" placeholder="Seu Nome" required>
            
            <textarea name="descricao" placeholder="Detalhes do problema..." rows="3" style="grid-column: span 2;"></textarea>
            
            <div style="grid-column: span 2;">
                <label style="display:block; margin-bottom:5px; color:#666; font-size: 14px;">Anexar print do erro (opcional):</label>
                <input type="file" name="imagem" accept="image/*">
            </div>

            <button type="submit" class="btn-enviar" style="grid-column: span 2;">ENVIAR CHAMADO</button>
        </div>
    </form>

    <br><hr>
    
    <h3>üìä Painel de Acompanhamento</h3>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Solicitante</th>
                <th>Assunto</th>
                <th>Status</th>
                <th>Prioridade</th>
            </tr>
        </thead>
        <tbody>
            {% for chamado in chamados %}
            <tr>
                <td>{{ chamado.data_criacao|date:"d/m/y H:i" }}</td>
                <td>{{ chamado.solicitante }}</td>
                <td><strong>{{ chamado.titulo }}</strong></td>
                <td><span class="status-concluido">{{ chamado.status }}</span></td>
                <td>{{ chamado.prioridade|default:"---" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="5" style="text-align: center; padding: 20px;">Nenhum chamado registrado.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

</body>
</html>